# Description: Lightweight X11 Display Manager based on Gtk.
# Url: http://wiki.lxde.org/en/LXDM
# Packager: tnut at nutyx dot org
# Depends on: consolekit2 iso-codes librsvg xorg-libxinerama xorg-libxrandr xorg-libxcursor xorg-libxdamage gtk2 consolekit2
PKGMK_GROUPS=()

name=lxdm
version=0.5.3
release=1
source=(http://downloads.sourceforge.net/$name/$name-$version.tar.xz git-fixes.patch
        default-config.patch 
        lxdm.pam
        Xsession)

build() {
cd $name-$version
patch -Np1 -i ../git-fixes.patch
patch -Np1 -i ../default-config.patch
cp ../lxdm.pam pam/lxdm
cp ../Xsession data/Xsession
[ -d gtk2 ] || cp -r $name-$version gtk2
  cd gtk2
  ./configure --prefix=/usr --sbindir=/usr/bin --libexecdir=/usr/lib/lxdm \
              --sysconfdir=/etc --localstatedir=/var
make
cd $SRC
  # GTK+ 3 version
  [ -d gtk3 ] || cp -r $name-$version gtk3
  cd gtk3
  ./configure --prefix=/usr --sbindir=/usr/bin --libexecdir=/usr/lib/lxdm \
              --sysconfdir=/etc --localstatedir=/var --enable-gtk3
make 
cd gtk2
make DESTDIR=$PKG install
chmod 644 $PKG/etc/lxdm/lxdm.conf
cd gtk3
make DESTDIR=$PKG install
chmod 644 $PKG/etc/lxdm/lxdm.conf
}
